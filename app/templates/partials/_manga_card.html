{# Manga card for the cache page (server-side rendering).
SYNC: This partial and UI.renderTask() in app/static/app.js render
structurally equivalent cards. When modifying the card layout,
update both to keep the visual structure consistent. #}
<div class="task-card">
    <div class="task-header">
        <div>
            <span class="cache-series-name">
                {% if manga.url %}
                <a href="{{ manga.url }}" target="_blank" rel="noopener">{{ manga.sanitized_name or manga.name
                    }}</a>
                {% else %}
                {{ manga.sanitized_name or manga.name }}
                {% endif %}
            </span>
            {% if manga.download_date %}
            <span class="cache-meta">Last downloaded: {{ manga.download_date[:10] }}</span>
            {% endif %}
        </div>
        <div class="task-actions">
            <span class="status-badge finished">{{ manga.files | length }} file{% if manga.files | length != 1 %}s{%
                endif %}</span>
            <button class="btn-remove-cache" data-series="{{ manga.name }}" type="button">Remove from cache</button>
        </div>
    </div>
    {% if manga.files %}
    <div class="file-list">
        <h4>Files:</h4>
        <ul>
            {% for filename in manga.files | sort %}
            <li>
                <a href="{{ url_for('main.api_cache_file', series=manga.name, filename=filename) }}"
                    download="{{ manga.sanitized_name or manga.name }} - {{ filename }}">
                    {{ manga.sanitized_name or manga.name }} - {{ filename }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
